!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(1)},function(e,t,n){"use strict";var r=n(2),o=(n.n(r),n(3)),l=(n.n(o),n(4)),i=n(6),s=n(7),a=wp.i18n.__,c=wp.blocks.registerBlockType,u=(wp.editor.RichText,wp.element.Fragment),p=["left","center","right","wide","full"];c("laa-blocks/posts",{title:a("Articles r\xe9cents"),description:a("Afficher la listes des derniers contenus"),icon:"calendar-alt",category:"common",keywords:[a("recents posts alt")],attributes:{number_event:{type:"integer",default:3},post_type:{type:"string",default:"Post"},sectionTitle:{type:"string",selector:".section_title"},sectionSubTitle:{type:"string",selector:".section_subtitle"},backgroundColor:{type:"string"},titleColor:{type:"string"},align:{type:"string"},contentAlign:{type:"string",default:"center"}},getEditWrapperProps:function(e){var t=e.align;if(-1!==p.indexOf(t))return{"data-align":t}},edit:function(e){var t=e.attributes,n=e.className,r=e.setAttributes,o=e.setState,a=e.isSelected,c=t.number_event,p=t.post_type,f=t.backgroundColor,m=t.titleColor,b=t.sectionTitle,h=t.sectionSubTitle,y=t.align,g=t.contentAlign;return wp.element.createElement(u,null,wp.element.createElement(s.a,{align:y,contentAlign:g,setAttributes:r}),wp.element.createElement(l.a,{className:n,number_event:c,post_type:p,sectionTitle:b,sectionSubTitle:h,backgroundColor:f,titleColor:m,align:y,setAttributes:r,setState:o,isSelected:a}),wp.element.createElement(i.a,{number_event:c,post_type:p,setAttributes:r,setState:o}))},save:function(e){return console.log(e),null}})},function(e,t){},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(5),s=n.n(i),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=wp.components.Spinner,u=wp.element.Component,p=wp.i18n.__,f=(wp.editor.RichText,function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={posts:null},n}return l(t,e),a(t,[{key:"getPost",value:function(){var e=this,t=this.props.post_type;(new wp.api.models[t]).fetch({data:{per_page:this.props.number_event}}).then(function(t){e.setState({posts:t})})}},{key:"componentWillMount",value:function(){this.getPost()}},{key:"componentDidUpdate",value:function(e,t){e.number_event!=this.props.number_event&&this.getPost(),e.post_type!=this.props.post_type&&this.getPost()}},{key:"render",value:function(){var e=this;if(console.log(this),!this.state.posts)return wp.element.createElement("p",{className:"capitaine-placeholder"},wp.element.createElement(c,null),p("Chargement des articles"));if(0===this.state.posts.length)return wp.element.createElement("p",{className:"capitaine-placeholder"},p("Aucun article trouv\xe9"));var t=function(t){e.props.setAttributes({sectionTitle:t.target.value})},n=function(t){e.props.setAttributes({sectionSubTitle:t.target.value})},r=function(e){return{__html:e}},o=s()(this.props.className,this.props.align?"align"+this.props.align:null);return wp.element.createElement("div",{style:{backgroundColor:this.props.backgroundColor,textAlign:this.props.alignment},className:o},wp.element.createElement("ul",{className:this.props.className+" posts-list row"},this.props.isSelected?wp.element.createElement("div",{className:"col-12"},wp.element.createElement("input",{type:"text",value:this.props.sectionTitle,className:"section_title col-12",onChange:t,placeholder:p("Les derniers articles")}),wp.element.createElement("input",{type:"text",value:this.props.sectionSubTitle,className:"section_subtitle col-12",onChange:n,placeholder:p("Sous titre")})):wp.element.createElement("div",{className:"col-12"},wp.element.createElement("h1",{className:"section_title col-12 text-center",style:{color:this.props.titleColor}},this.props.sectionTitle),wp.element.createElement("p",{className:"section_subtitle col-12 text-center",style:{color:this.props.titleColor}},this.props.sectionSubTitle)),this.state.posts.map(function(e){return wp.element.createElement("li",{className:""},wp.element.createElement("div",{className:"inner-post h-100"},!!e.feat_image_url&&wp.element.createElement("img",{src:e.feat_image_url.thumbnail[0],className:"wp-block-laa-posts-grid-post__image"}),wp.element.createElement("a",{href:e.link,target:"_blank"},wp.element.createElement("h2",{className:"entry-title",dangerouslySetInnerHTML:r(e.title.rendered)}),wp.element.createElement("div",{className:"post-excerpt",dangerouslySetInnerHTML:r(e.excerpt.rendered)}))))})))}}]),t}(u));t.a=f},function(e,t,n){var r,o;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r))e.push(n.apply(null,r));else if("object"===o)for(var i in r)l.call(r,i)&&r[i]&&e.push(i)}}return e.join(" ")}var l={}.hasOwnProperty;"undefined"!==typeof e&&e.exports?e.exports=n:(r=[],void 0!==(o=function(){return n}.apply(t,r))&&(e.exports=o))}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=wp.element.Component,a=wp.i18n.__,c=wp.editor,u=(c.BlockControls,c.InspectorControls),p=c.ColorPalette,f=wp.components,m=f.PanelBody,b=f.PanelColor,h=(f.ButtonGroup,f.Button,f.ToggleControl,f.RangeControl),y=f.SelectControl,g=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={posts:null},n}return l(t,e),i(t,[{key:"render",value:function(){var e=this.props,t=e.number_event,n=e.post_type,r=e.setAttributes,o=(e.setState,e.backgroundColor),l=e.titleColor;return wp.element.createElement(u,null,wp.element.createElement(m,{title:a("Type de contenu")},wp.element.createElement(y,{onChange:function(e){return r({post_type:e})},label:a("Type de contenu"),options:[{value:"Post",label:"Articles"},{value:"Events",label:"Evenements"}],value:n})),wp.element.createElement(m,{title:a("Nombre d'articles")},wp.element.createElement(h,{value:t,onChange:function(e){return r({number_event:e})},min:1,max:10,beforeIcon:"arrow-down",afterIcon:"arrow-up"})),wp.element.createElement(b,{title:a("Couleur du fond"),colorValue:o},wp.element.createElement(p,{value:o,onChange:function(e){return r({backgroundColor:e})}})),wp.element.createElement(b,{title:a("Couleur du titre"),colorValue:l},wp.element.createElement(p,{value:l,onChange:function(e){return r({titleColor:e})}})))}}]),t}(s);t.a=g},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=wp.element.Component,a=(wp.i18n.__,wp.editor),c=a.BlockControls,u=a.BlockAlignmentToolbar,p=a.AlignmentToolbar,f=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return l(t,e),i(t,[{key:"render",value:function(){var e=this.props,t=e.align,n=e.contentAlign,r=e.setAttributes,o=function(e){return r({align:e})};return wp.element.createElement(c,null,wp.element.createElement(u,{value:t,onChange:o}),wp.element.createElement(p,{value:n,onChange:function(e){r({contentAlign:e})}}))}}]),t}(s);t.a=f}]);